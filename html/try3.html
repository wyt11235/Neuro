<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title></title>	

<style type="text/css">
    .container{
      margin:0 auto;
      width:600px;
    }
    #scene{
      border:1px solid black;
    }
</style>


</head>

<body>

<div class="container">
<canvas id="grating_area"  width ="600"  height = "600"></canvas>
</div>

</body>


<script>


	var bk_width = 600;
    var gra_width = bk_width/2;
    var mar_width = (bk_width-gra_width)/2;	

    var ori =20;
	var grate = new Image()
	grate.src = "images/grating.png";
    
	var bk = document.getElementById("grating_area");
	var bk_cxt = bk.getContext("2d");
	//bk_cxt.fillStyle = "#808080";
	//bk_cxt.fillRect(0,0,bk_width,bk_width);


	var ori_h =ori/180*Math.PI;
	var sq2 = Math.sqrt(2);
	//bk_cxt.rotate(ori_h);
   
    dx = (sq2*gra_width+2*sq2*mar_width)*Math.sin(ori_h/2)*Math.cos(Math.PI/4-ori_h/2);
    dy = (sq2*gra_width+2*sq2*mar_width)*Math.sin(ori_h/2)*Math.sin(Math.PI/4-ori_h/2);         
image.onload = function(){  
	bk_cxt.drawImage(grate,0,0,783,783,mar_width+dy,mar_width-dx,gra_width,gra_width);
};  

	

	//bk_cxt.rotate(-ori_h);



</script>
</html>